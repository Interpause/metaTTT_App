!function(){var e={locked:"BOARD LOCKED",occupied:"SQUARE FULL",started:"GAME STARTED",ended:"GAME ENDED",full:"GAME FULL",move:"MOVE",turn:"TURN",unfound:"NOT FOUND LOL",okay:"OKAY",error:"FAIL",null:"NullPointerException",info:"INFO",busy:"BUSY",getSessions:"GET SESSIONS",getSpecSessions:"GET SPEC SESSIONS",createSession:"MAKE ME A GAME",findSession:"FIND ME A GAME",updateState:"STATE UPDATE",join:"JOIN",leave:"LEAVE",disconnect:"DISCONNECTING",connect:"HELLO"},t={grid_len:3,num_players:2,win_req:3,size:9,checks:{horiz:[1,0],verti:[0,1],rdiag:[1,1],ldiag:[-1,1]}},i=class{get cur_player(){return this.player_ids[this.cur_player_ind]}constructor(e,i){if(this.config=t,this.history=[],this.player_ids=[],this.grid={},this.turns=0,this.winner=null,this.cur_board=null,this.cur_player_ind=0,i)return this.config=e.config,this.history=e.history,this.player_ids=e.player_ids,this.grid=e.grid,this.turns=e.turns,this.winner=e.winner,this.cur_board=e.cur_board,void(this.cur_player_ind=e.cur_player_ind);e&&(this.config=e),this.config.size=this.config.grid_len**2,this.grid={winner:null},this.history.push(this.config);for(let t=1;t<=this.config.size;t++){let e={winner:null};for(let t=1;t<=this.config.size;t++)e[t]={winner:null};this.grid[t]=e}}place(e){this.checkMoveValid(e),this.grid[e[0]][e[1]].winner=this.cur_player_ind,this.history.push([this.cur_player,e]),this.updateWins(e[0]),null!=this.grid[e[1]].winner?this.cur_board=null:this.cur_board=e[1],this.turns++,this.cur_player_ind=this.turns%this.config.num_players}updateWins(e){if(null!=this.winner)return;let t=this.checkWin(this.grid[e]);if(-1==t)this.grid[e].winner=-1;else if(1==t){this.grid[e].winner=this.cur_player_ind;let t=this.checkWin(this.grid);-1==t?(this.grid.winner=-1,this.winner=-1):1==t&&(this.grid.winner=this.cur_player_ind,this.winner=this.cur_player_ind)}}checkWin(e){let t=!0;for(let i=1;i<=this.config.size;i++)for(let n in this.config.checks){let s=!0,r=this.oD2D(i);for(let o=1;s&&o<this.config.win_req;o++){if(null==e[i].winner){s=!1,t=!1;break}let a={x:r.x+o*this.config.checks[n][0],y:r.y+o*this.config.checks[n][1]};if(a.y>=this.config.grid_len|a.x>=this.config.grid_len|a.y<0|a.x<0){s=!1;break}if(e[this.tD1D(a)].winner!=e[i].winner){s=!1;break}}if(s)return 1}return t?-1:0}checkMoveValid(t){if(null!=this.winner)throw new Error(e.error);if(null!=this.cur_board&&this.cur_board!=t[0])throw new Error(`${e.locked}: ${t[0]},${t[1]}`);if(null!=this.grid[t[0]][t[1]].winner)throw new Error(`${e.occupied}: ${t[0]},${t[1]}`)}oD2D(e){return{x:(e-1)%this.config.grid_len,y:Math.floor((e-1)/this.config.grid_len)}}tD1D(e){return e.y*this.config.grid_len+e.x+1}},n={},s=Object.create||function(e){var t=function(){};return t.prototype=e,new t},r=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return i},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}n=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var c,l=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),c=0===u.x}catch(E){c=!1}function g(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,i,n){var r,o,a;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),a=o[t]):(o=e._events=s(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),!a.warned&&(r=g(e))&&r>0&&a.length>r){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message)}}else a=o[t]=i,++e._eventsCount;return e}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},s=o.call(h,n);return s.listener=i,n.wrapFn=s,s}function p(e,t,i){var n=e._events;if(!n)return[];var s=n[t];return s?"function"==typeof s?i?[s.listener||s]:[s]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(s):m(s,s.length):[]}function y(e){var t=this._events;if(t){var i=t[e];if("function"==typeof i)return 1;if(i)return i.length}return 0}function m(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}c?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return g(this)},a.prototype.emit=function(e){var t,i,n,s,r,o,a="error"===e;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(i=o[e]))return!1;var l="function"==typeof i;switch(n=arguments.length){case 1:!function(e,t,i){if(t)e.call(i);else for(var n=e.length,s=m(e,n),r=0;r<n;++r)s[r].call(i)}(i,l,this);break;case 2:!function(e,t,i,n){if(t)e.call(i,n);else for(var s=e.length,r=m(e,s),o=0;o<s;++o)r[o].call(i,n)}(i,l,this,arguments[1]);break;case 3:!function(e,t,i,n,s){if(t)e.call(i,n,s);else for(var r=e.length,o=m(e,r),a=0;a<r;++a)o[a].call(i,n,s)}(i,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,i,n,s,r){if(t)e.call(i,n,s,r);else for(var o=e.length,a=m(e,o),c=0;c<o;++c)a[c].call(i,n,s,r)}(i,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(n-1),r=1;r<n;r++)s[r-1]=arguments[r];!function(e,t,i,n){if(t)e.apply(i,n);else for(var s=e.length,r=m(e,s),o=0;o<s;++o)r[o].apply(i,n)}(i,l,this,s)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var i,n,r,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=s(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(e,t){for(var i=r,n=i+1,s=e.length;n<s;i+=1,n+=1)e[i]=e[n];e.pop()}(i),1===i.length&&(n[e]=i[0]),n.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.removeAllListeners=function(e){var t,i,n;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=s(null),this._eventsCount=0):i[e]&&(0==--this._eventsCount?this._events=s(null):delete i[e]),this;if(0===arguments.length){var o,a=r(i);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},a.prototype.listenerCount=y,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var k=class extends n{constructor(t){super(),this.state={},this.isStarted=!1,this.num_players=0,this.max_players=0,this.num_spectators=0,this.gconfig=e,this.online=!1,this.gui=null,this.player_ids=[],this.spectators=[],this.gui=t,this.online=null==t}init(e){e&&(this.gconfig=e),this.max_players=this.gconfig.num_players,this.state=new i(this.gconfig)}restoreSession(e){this.gconfig=e.config,this.max_players=this.gconfig.num_players,this.num_players=this.max_players,this.player_ids=e.player_ids.slice(),this.spectators=e.player_ids.slice(),this.state=new i(e,!0)}addPlayer(t){if(this.isStarted)throw new Error(e.started);if(this.max_players==this.num_players)throw new Error(e.full);this.player_ids.push(t),this.addSpectator(t),this.num_players++}addSpectator(e){this.spectators.push(e),this.num_spectators++}removeSpectator(e){let t=this.spectators.indexOf(e);t>-1&&(this.spectators.splice(t,1),this.num_spectators--)}getState(t){if(this.spectators.indexOf(t)>-1)return this.state;throw new Error(e.locked)}getInfo(){return{started:this.isStarted,numPlys:this.num_players,maxPlys:this.max_players,gconf:this.gconfig,plyrs:this.player_ids,specs:this.spectators,turn:this.state.turns,cur:this.state.cur_player_ind}}setInput(t,i){if(this.state.cur_player!=t)throw new Error(e.locked);this.state.place(i)}start(){if(this.isStarted)throw new Error(e.started);if(this.isStarted=!0,this.num_players!=this.max_players)throw new Error(e.error);this.state.player_ids=this.player_ids,this.online||(this.gui.receivePlayersInfo(this.player_ids),this.gui.receiveBoard(this.state))}};(function(e){let t=null;try{t=window}catch(i){}try{t=e}catch(i){}t.gen_uuid=(e=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),t.wait=(e=>new Promise((t,i)=>setTimeout(t,e)))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),window.gconf=t,window.game=null,window.startLocalGame=async function(){displayLoadingIndicator(),await gui.init(guiConfig,window.gconf,!1),game=new k(gui),game.init(window.gconf);for(let e=0;e<window.gconf.num_players;e++)game.addPlayer(client.pid);game.start(),hideLoadingIndicator()},window.loadGame=async function(e,t){if(displayLoadingIndicator(),await gui.init(guiConfig,e.config,t),t){let t=new i(e,!0);t.names=e.names,gui.receivePlayersInfo(t.player_ids),gui.receiveBoard(t)}else game=new k(gui),game.restoreSession(e),game.start();hideLoadingIndicator()},window.app={initialize:function(){document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1)},onDeviceReady:function(){document.addEventListener("backbutton",this.onBackKey.bind(this),!1),document.addEventListener("resume",this.onAppResume.bind(this),!1),document.addEventListener("pause",this.onAppPause.bind(this),!1),window.screen.orientation.lock("portrait-primary"),StatusBar.hide(),this.receivedEvent("deviceready")},onAppPause:function(){document.querySelector("#bgMusic").pause(),-1==game.state.winner?window.localStorage.setItem("save",JSON.stringify(game.state)):window.localStorage.removeItem("save")},onAppResume:function(){document.querySelector("#bgMusic").play()},onBackKey:function(){btnBack()},receivedEvent:async function(e){if("deviceready"!=e)return;changeFocus(guiState.gamePg),guiConfig.cont.style.opacity=1;let t=window.localStorage.getItem("settings");if(null!=t){let e=JSON.parse(t);""!=e.client_url&&(client.url=e.client_url),client.name=e.client_name,e.performance_mode||generateBg()}else generateBg();let i=window.localStorage.getItem("clientid");null==i&&(i=gen_uuid());let n=window.localStorage.getItem("passwd");null==n&&(n=gen_uuid()),client.pid=i,client.passwd=n,window.localStorage.setItem("clientid",client.pid),window.localStorage.setItem("passwd",client.passwd);let s=window.localStorage.getItem("save");if(null==s)await startLocalGame();else try{await loadGame(JSON.parse(s),!1)}catch(r){console.log(r),await startLocalGame()}document.querySelector("#splash").style.display="none"}},app.initialize();var w={};const b={rows:10,cols:4,min_speed:20,max_speed:50,gap_ratio:.15,randomness:.75},S=50*1.732050808;function v(e,t,i){let n={},s=function(e,t,i){let n=i.colors.slice(),s=[];Math.random()<i.randomness&&null!=e&&n.splice(n.indexOf(e),1),Math.random()<i.randomness&&null!=t&&n.splice(n.indexOf(t),1),s.push(n[Math.floor(Math.random()*n.length)]);let r=i.colors.slice();r.splice(r.indexOf(s[0]),1);for(let o=r.length-1;o>0;o--){let e=Math.floor(Math.random()*(o+1));[r[o],r[e]]=[r[e],r[o]]}return s.concat(r)}(e,t,i);return s.push(s.slice(0,1)[0]),n.color_seq=s,n.speed=Math.floor(Math.random()*(i.max_speed-i.min_speed))+i.min_speed,n}b.colors=["#ffffff","#0c7c5f","#000000","#fab20b","#e62840","#8862b8","#fddb0d","#deddde","#ffffff","#0c7c5f","#000000"],w.genBg=function(e){let t=Object.assign({},b);null!=e&&Object.entries(e).forEach(([e,i])=>t[e]=i);let i=50*t.gap_ratio,n=i/2,s=i/2*.866025404,r=100*t.cols,o=S*t.rows+s/4,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("viewBox",`0 0 ${r} ${o}`),a.setAttribute("shape-rendering","geometricPrecision");let c=document.createElementNS("http://www.w3.org/2000/svg","g");a.appendChild(c);let l=[],u=[],g=void 0,d=!1;for(let h=0;h<2*t.rows;h++){d=h%2==0;let e=document.createElementNS("http://www.w3.org/2000/svg","polygon"),o=document.createElementNS("http://www.w3.org/2000/svg","polygon"),a=v(l[0],g,t);e.setAttribute("fill",a.color_seq[0]),o.setAttribute("fill",a.color_seq[0]),u.push(a.color_seq[0]),g=a.color_seq[0];let f=0,p=h*S+(d?s:i)/2,y=0,m=(h+1)*S-(d?i:s)/2,k=50-n,w=d?h*S+s/2:(h+1)*S-s/2,b=r,_=p,P=r,L=m,q=r-50+n,E=w;e.setAttribute("points",`${f},${p} ${y},${m} ${k},${w}`),o.setAttribute("points",`${b},${_} ${P},${L} ${q},${E}`),e.setAttribute("shape-rendering","geometricPrecision"),o.setAttribute("shape-rendering","geometricPrecision");let x=document.createElementNS("http://www.w3.org/2000/svg","animate");x.setAttribute("attributeName","fill"),x.setAttribute("values",`${a.color_seq.join(";")};`),x.setAttribute("dur",`${a.speed}s`),x.setAttribute("repeatCount","indefinite"),e.appendChild(x.cloneNode(!0)),o.appendChild(x.cloneNode(!0)),c.appendChild(e),c.appendChild(o);for(let r=1;r<2*t.cols;r++){let e=document.createElementNS("http://www.w3.org/2000/svg","polygon"),o=v(l[r],g,t);e.setAttribute("fill",o.color_seq[0]),u.push(o.color_seq[0]),g=o.color_seq[0];let a=100*(r-1)/2+n,f=d?(h+1)*S-s/2:h*S+s/2,p=100*(r+1)/2-n,y=d?(h+1)*S-s/2:h*S+s/2,m=100*r/2,k=d?h*S+i/2:(h+1)*S-i/2;e.setAttribute("points",`${a},${f} ${p},${y} ${m},${k}`),e.setAttribute("shape-rendering","geometricPrecision");let w=document.createElementNS("http://www.w3.org/2000/svg","animate");w.setAttribute("attributeName","fill"),w.setAttribute("values",`${o.color_seq.join(";")};`),w.setAttribute("dur",`${o.speed}s`),w.setAttribute("repeatCount","indefinite"),e.appendChild(w),c.appendChild(e),d=!d}g=void 0,l=u,u=[]}return a};const _=["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","queer","queers","queerz","qweers","qweerz","qweir","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","lesbian","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"],P=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"];const L=new class{constructor(e={}){Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(_,[P,e.list||[]]),exclude:e.exclude||[],placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|\$|\@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}isProfane(e){return this.list.filter(t=>{const i=new RegExp(`\\b${t.replace(/(\W)/g,"\\$1")}\\b`,"gi");return!this.exclude.includes(t.toLowerCase())&&i.test(e)}).length>0||!1}replaceWord(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(e){return e.split(/\b/).map(e=>this.isProfane(e)?this.replaceWord(e):e).join("")}addWords(){let e=Array.from(arguments);this.list.push(...e),e.map(e=>e.toLowerCase()).forEach(e=>{this.exclude.includes(e)&&this.exclude.splice(this.exclude.indexOf(e),1)})}removeWords(){this.exclude.push(...Array.from(arguments).map(e=>e.toLowerCase()))}};window.guiState={gamePg:document.querySelector("#gamePg"),settingsPg:document.querySelector("#settingsPg"),creditsPg:document.querySelector("#creditsPg"),onlinePg:document.querySelector("#onlinePg"),onlineGamePg:document.querySelector("#onlineGamePg"),spectatePg:document.querySelector("#spectatePg"),sessBars:Array.from(onlinePg.querySelectorAll(".sessionInfo")),specBars:Array.from(spectatePg.querySelectorAll(".sessionInfo")),header:document.querySelector("#onlineGameHeader"),forfeitBtn:document.querySelector("#endSession"),loadIndicator:document.querySelector("#loadingIndicator"),noInternetIndicator:document.querySelector("#weakInternetIndicator"),clickSnd:document.querySelector("#clkSnd"),rstSnd:document.querySelector("#clkSnd"),tadaSnd:document.querySelector("#tadaSnd"),pgFocus:null,backSeq:[gamePg],pgTransitionInProg:!1,btnReplayInProg:!1},guiState.gamePg.arrive=(async()=>client.disconnect()),guiState.settingsPg.arrive=(async()=>{let e=window.localStorage.getItem("settings");if(null!=e){let t=JSON.parse(e),i=document.querySelector("#settingsCont");i.querySelector("input[name='client_url']").value=t.client_url,i.querySelector("input[name='client_name']").value=t.client_name,i.querySelector("input[name='performance_mode']").checked=t.performance_mode}}),guiState.creditsPg.arrive=(async()=>{}),guiState.onlinePg.arrive=(async()=>client.connect().then(client.getSavedSessions)),guiState.onlineGamePg.arrive=(async()=>onlineGrid()),guiState.spectatePg.arrive=(async()=>client.getSpecSessions()),guiState.gamePg.leave=(async()=>{}),guiState.settingsPg.leave=(async()=>{}),guiState.creditsPg.leave=(async()=>{}),guiState.onlinePg.leave=(async()=>{}),guiState.onlineGamePg.leave=(async()=>{null!=gui.state.names&&1==gui.state.names.length&&client.quitSession(),client.online=!1,client.cur_gid=null,resetGrid()}),guiState.spectatePg.leave=(async()=>{}),document.querySelector("#endSession").addEventListener("click",()=>client.quitSession()),document.querySelector("#sobtn2").addEventListener("click",()=>client.getSpecSessions()),window.changeFocus=async function(e){null!=guiState.pgFocus&&await guiState.pgFocus.leave(),await e.arrive(),guiState.pgFocus=e},window.switchPg=async function(t){if(guiState.pgTransitionInProg)throw new Error(e.busy);guiState.pgTransitionInProg=!0;try{await changeFocus(t)}catch(s){throw guiState.pgTransitionInProg=!1,s}t.style.setProperty("display","block"),await wait(70);let i=guiState.backSeq[guiState.backSeq.length-1];guiState.backSeq.length>1&&i.classList.remove("pgFocus");let n="translate(0vw,0vh)";t.classList.contains("pgLeft")&&(n="translateX(100vw)"),t.classList.contains("pgRight")&&(n="translateX(-100vw)"),t.classList.contains("pgTop")&&(n="translateY(100vh)"),t.classList.contains("pgBtm")&&(n="translateY(-100vh)"),i.style.setProperty("transform",n),t.classList.add("pgFocus"),wait(300).then(()=>{i.style.setProperty("display","none"),guiState.backSeq.push(t),guiState.pgTransitionInProg=!1})},window.btnBack=async function(){if(guiState.pgTransitionInProg)throw new Error(e.busy);if(guiState.clickSnd.play(),guiState.backSeq.length<2)throw new Error(e.error);guiState.pgTransitionInProg=!0;let t=guiState.backSeq[guiState.backSeq.length-1],i=guiState.backSeq[guiState.backSeq.length-2];try{await changeFocus(i)}catch(n){throw guiState.pgTransitionInProg=!1,n}i.style.setProperty("display","block"),await wait(70),guiState.backSeq.length>2&&i.classList.add("pgFocus"),t.classList.remove("pgFocus"),i.style.setProperty("transform",null),wait(300).then(()=>{t.style.cssText=null,guiState.backSeq.pop(),guiState.pgTransitionInProg=!1},300)};for(let x of document.querySelectorAll(".backBtn"))x.addEventListener("click",()=>btnBack());window.btnGamePg=function(e){if(guiState.clickSnd.play(),guiState.pgFocus==guiState.gamePg)switch(e){case"settings":switchPg(guiState.settingsPg);break;case"share":break;case"credits":switchPg(guiState.creditsPg);break;case"feedback":LaunchReview.launch();break;case"multiplayer":switchPg(guiState.onlinePg);break;case"puzzle":case"shop":break;case"replay":resetGrid()}},document.querySelector("#mbtn1").addEventListener("click",()=>btnGamePg("settings")),document.querySelector("#mbtn2").addEventListener("click",()=>btnGamePg("share")),document.querySelector("#mbtn3").addEventListener("click",()=>btnGamePg("credits")),document.querySelector("#mbtn4").addEventListener("click",()=>btnGamePg("feedback")),document.querySelector("#mbtn5").addEventListener("click",()=>btnGamePg("multiplayer")),document.querySelector("#mbtn6").addEventListener("click",()=>btnGamePg("puzzle")),document.querySelector("#mbtn7").addEventListener("click",()=>btnGamePg("shop")),document.querySelector("#mbtn8").addEventListener("click",()=>btnGamePg("replay")),window.saveSettings=function(){let e=document.querySelector("#settingsCont"),t=e.querySelector("input[name='grid_len']:checked").value,i=e.querySelector("input[name='plyr_no']:checked").value,n=e.querySelector("input[name='win_req']:checked").value,s=!1;t!=window.gconf.grid_len&&(window.gconf.grid_len=t,s=!0),i!=window.gconf.num_players&&(window.gconf.num_players=i,s=!0),n!=window.gconf.win_req&&(window.gconf.win_req=n,s=!0),s&&resetGrid();let r=e.querySelector("input[name='client_url']").value;client.url=""==r?client.url:r;let o=e.querySelector("input[name='client_name']").value;o=L.clean(o),client.name=""==o?client.name:o;let a=e.querySelector("input[name='performance_mode']");if(a.checked){let e=document.querySelector("#bg");for(;e.hasChildNodes();)e.removeChild(e.lastChild)}else bg.hasChildNodes()||generateBg();let c={client_url:r,client_name:client.name,performance_mode:a.checked};window.localStorage.setItem("settings",JSON.stringify(c)),btnBack()},document.querySelector("#sbtn1").addEventListener("click",()=>saveSettings()),window.btnOnlinePg=function(e){if(guiState.clickSnd.play(),guiState.pgFocus==guiState.onlinePg)switch(e){case"quickPlay":client.findSession().then(()=>switchPg(guiState.onlineGamePg));break;case"spectateMenu":switchPg(guiState.spectatePg);break;case"refreshPg":client.getSavedSessions()}},document.querySelector("#obtn2").addEventListener("click",()=>btnOnlinePg("spectateMenu")),document.querySelector("#obtn3").addEventListener("click",()=>btnOnlinePg("refreshPg")),document.querySelector("#obtn4").addEventListener("click",()=>btnOnlinePg("quickPlay")),window.genSessMenu=function(e,t){let i=1==t?guiState.specBars:guiState.sessBars;i.forEach(e=>e.style.display="none");let n=0;for(let s in e){let t=i[n],r=e[s];if(null==t)return void console.log("More save states sent from server than bars?");r.plyrs[r.cur]==client.pid?t.querySelectorAll(".sessInfo")[0].innerHTML=`Your Turn @ ${r.turn} moves`:t.querySelectorAll(".sessInfo")[0].innerHTML=r.names[r.cur]+`'s Turn @ ${r.turn} moves`,t.querySelectorAll(".mini")[0].onclick=(()=>{client.cur_gid=s,switchPg(guiState.onlineGamePg)}),t.setAttribute("gid",s),t.style.display="block",n++}},window.hideGrid=async function(){if(guiState.rstSnd.play(),0!=guiConfig.cont.style.opacity)return Array.from(document.querySelectorAll(".btn")).forEach(e=>e.style.setProperty("animation",null)),guiConfig.cont.style="",guiConfig.cont.style.setProperty("transition","transform 1.2s, opacity 0.4s linear, color 0.5s ease 0.1s"),guiConfig.cont.style.setProperty("transform","rotate(-1440deg)"),guiConfig.cont.style.setProperty("opacity","0"),wait(400)},window.showGrid=async function(){1!=guiConfig.cont.style.opacity&&(guiConfig.cont.style.setProperty("opacity","1"),await wait(800),guiConfig.cont.style.setProperty("transition","color 0.5s ease 0.1s"),guiConfig.cont.style.setProperty("transform",null))},window.resetGrid=async function(){if(guiState.btnReplayInProg)throw new Error(e.busy);guiState.btnReplayInProg=!0,await hideGrid(),gui.state={},guiConfig.cont=document.querySelector("#gamePg .TTTgame"),await startLocalGame(),await showGrid(),guiState.btnReplayInProg=!1},window.onlineGrid=async function(){guiConfig.cont=document.querySelector("#onlineGamePg .TTTgame"),gui.state={},guiState.header.innerHTML="Waiting...";let e=[hideGrid(),client.joinSession()];return await Promise.all(e),showGrid()},window.updateHeader=function(){client.online&&(gui.state.player_ids.length<gui.state.config.num_players?guiState.header.innerHTML="Waiting...":gui.state.cur_player==client.pid?guiState.header.innerHTML=`Your Turn @ ${gui.state.turns} moves`:guiState.header.innerHTML=gui.state.names[gui.state.cur_player_ind]+`'s Turn @ ${gui.state.turns} moves`)},window.menuWinAnim=function(){guiState.tadaSnd.play(),Array.from(document.querySelectorAll(".btn")).forEach(e=>e.style.setProperty("animation","winBtn 0.5s linear 0s infinite"))},window.weakInternetAnim=function(){guiState.noInternetIndicator.style.opacity=1,wait(1e3).then(()=>guiState.noInternetIndicator.style.opacity=0)},window.displayLoadingIndicator=function(){document.querySelector("#loadingIndicator").style.opacity=1},window.hideLoadingIndicator=function(){document.querySelector("#loadingIndicator").style.opacity=0},window.generateBg=function(){let e=w.genBg();e.style.width="100%",e.style.height="auto",document.querySelector("#bg").appendChild(e)},window.guiConfig={},guiConfig.cont=document.querySelector("#gamePg .TTTgame"),guiConfig.grid_pfx="grid",guiConfig.sqr_pfx="btn",window.musicPlaying=!1,window.onclick=function(){musicPlaying||document.querySelector("#bgMusic").play(),musicPlaying=!0},window.gui={guiconf:{},gconf:{},input:null,state:{},players:[],hist:[],online:!1,btnList:[],olyList:[],isProc:!1,init:async function(t,i,n){this.guiconf=t,this.gconf=i,this.online=n,this.guiconf.plyColors=[],this.btnList=[],this.olyList=[],this.hist.push([e.info,"ONLINE",this.online]),this.guiconf.cont.innerHTML="";for(let e=1;e<=this.gconf.grid_len;e++)for(let t=1;t<=this.gconf.grid_len;t++){let i=document.createElement("div");i.style.setProperty("grid-column",`${t} / span 1`),i.style.setProperty("grid-row",`${e} / span 1`),i.classList.add("grid");let n=document.createElement("div");n.style.setProperty("grid-column",`1 / span ${this.gconf.grid_len}`),n.style.setProperty("grid-row",`1 / span ${this.gconf.grid_len}`),n.classList.add("gridOly"),i.appendChild(n),this.olyList.push(n);for(let s=1;s<=this.gconf.grid_len;s++)for(let n=1;n<=this.gconf.grid_len;n++){let r=document.createElement("button");r.style.setProperty("grid-column",`${n} / span 1`),r.style.setProperty("grid-row",`${s} / span 1`),r.setAttribute(this.guiconf.grid_pfx,(e-1)*this.gconf.grid_len+t),r.setAttribute(this.guiconf.sqr_pfx,(s-1)*this.gconf.grid_len+n),r.addEventListener("click",this.btn_link),r.disabled=!0,r.classList.add("sqr"),i.appendChild(r),this.btnList.push(r)}this.guiconf.cont.appendChild(i)}},receivePlayersInfo:function(e){this.players=e,this.guiconf.plyColors=[];for(let t=0;t<this.players.length;t++)this.guiconf.plyColors.push(`hsl(${t*(360/this.players.length)%360},100%,50%)`)},receiveBoard:async function(t){return this.state=t,this.hist.push([e.turn,this.state.cur_player_ind]),window.updateHeader(),this.updateContainer()},receiveHist:function(e){for(let t of e)this.hist.push(t)},getHistLen:function(){return this.hist.length},updateContainer:async function(){for(let e of gui.btnList)e.disabled=!0;for(let e=0;e<gui.btnList.length;e++){let t=gui.btnList[e],i=t.getAttribute(gui.guiconf.grid_pfx),n=t.getAttribute(gui.guiconf.sqr_pfx),s=!1;null!=gui.state.grid[i].winner?s=!0:null!=gui.state.grid[i][n].winner?s=!0:null!=gui.state.cur_board&&gui.state.cur_board!=i?s=!1:gui.state.cur_player!=client.pid?s=!1:t.disabled=!1,s&&(t.style.setProperty("z-index","3"),-1!=gui.state.grid[i].winner&&null!=gui.state.grid[i].winner?(t.style.setProperty("transition","background-color 0.5s ease-in 0s"),t.style.setProperty("background-color",gui.guiconf.plyColors[gui.state.grid[i].winner],"important")):(t.style.setProperty("transition","background-color 0s"),t.style.setProperty("background-color",gui.guiconf.plyColors[gui.state.grid[i][n].winner],"important")))}for(let e=1;e<=gui.olyList.length;e++){let t=!1,i=gui.olyList[e-1];(t=gui.state.player_ids.length<gui.state.config.num_players||gui.state.cur_player!=client.pid||!(null==gui.state.cur_board|gui.state.cur_board==e))?(i.style.setProperty("transition","opacity 0.2s ease-in 0s"),i.style.setProperty("opacity","0.6")):(i.style.setProperty("transition","opacity 0s"),i.style.setProperty("opacity","0"))}gui.guiconf.cont.style.setProperty("color",gui.guiconf.plyColors[gui.state.cur_player_ind]),null!=gui.state.winner&&(gui.gridWinAnim(),menuWinAnim())},gridWinAnim:function(){this.btnList.forEach(e=>{e.disabled=!0,e.style.setProperty("transition","background-color 0.5s ease-in 0s"),wait(200).then(()=>{e.style.setProperty("z-index","3"),e.style.setProperty("background-color",this.guiconf.plyColors[this.state.winner],"important")})}),this.guiconf.cont.style.setProperty("animation","winGlow 3s linear 0s infinite")},btn_link:function(t){if(gui.isProc)return;gui.isProc=!0;let i=t.target;if(i.disabled)return;let n=[i.getAttribute(gui.guiconf.grid_pfx),i.getAttribute(gui.guiconf.sqr_pfx)];gui.online?(gui.guiconf.cont.style.setProperty("color","white"),client.makeMove(n)):(gui.guiconf.cont.style.setProperty("color","white"),gui.state.place(n),gui.updateContainer(),gui.hist.push([e.move,n])),gui.isProc=!1}};const q=(e,t)=>new Promise(i=>e.once(t,()=>i()));window.client=Object.assign(new n,{name:"Guest",cur_gid:null,pid:null,passwd:null,online:!1,ws:null,url:"ws://metattt-server.glitch.me",connect_ws:function(){return new Promise((e,t)=>{let i=new WebSocket(client.url);i.onopen=(()=>e(i)),i.onerror=(e=>t(e))})},connect:async function(){if(!client.ws||1!=client.ws.readyState){client.online=!1,console.log("connecting..."),displayLoadingIndicator();try{client.ws=await client.connect_ws()}catch(t){throw hideLoadingIndicator(),weakInternetAnim(),console.error(t),t}return client.ws.onerror=(e=>{3==client.ws.readyState&&(hideLoadingIndicator(),weakInternetAnim()),console.error(e)}),client.ws.onclose=(e=>{client.online&&(weakInternetAnim(),console.log(e),console.log("reconnecting..."),client.connect())}),client.ws.onmessage=(e=>{client.online=!0;let t=JSON.parse(e.data);Array.isArray(t)?t.forEach(e=>{client.emit(e.event,e.data),console.log(e)}):(client.emit(t.event,t.data),console.log(t))}),await q(client,e.connect),client.sendServer(e.connect,{pid:client.pid,passwd:client.passwd,name:client.name}),q(client,e.okay)}},disconnect:function(e){client.online=!1,console.log("disconnected existing socket"),null!=client.ws&&(client.ws.close(),client.ws=null,hideLoadingIndicator())},sendServer:async function(e,t){await client.connect(),client.ws.send(JSON.stringify({event:e,data:t}))},updateState:async function(t){if(null==t)throw new Error(`${e.null}: Null state`);if(t==e.error)throw new Error(`${e.error}: error state received`);return client.cur_gid=t.gid,t.player_ids.indexOf(client.pid)>-1?guiState.forfeitBtn.disabled=!1:guiState.forfeitBtn.disabled=!0,loadGame(t,!0)},getSavedSessions:async function(){displayLoadingIndicator(),client.sendServer(e.getSessions),await q(client,e.getSessions),hideLoadingIndicator()},getSpecSessions:async function(){displayLoadingIndicator(),client.sendServer(e.getSpecSessions),await q(client,e.getSpecSessions),hideLoadingIndicator()},findSession:async function(){displayLoadingIndicator(),client.sendServer(e.findSession),await q(client,e.findSession),hideLoadingIndicator()},joinSession:async function(t){displayLoadingIndicator(),null==t&&(t=client.cur_gid);let i={};client.sendServer(e.join,{gid:t}),client.once(e.join,e=>i=e),await q(client,e.join),await q(client,e.updateState),hideLoadingIndicator()},quitSession:async function(){return client.sendServer(e.leave,{gid:client.cur_gid}),btnBack(),q(client,e.leave)},makeMove:async function(t){displayLoadingIndicator(),client.sendServer(e.move,{gid:client.cur_gid,move:t}),await q(client,e.move),hideLoadingIndicator()}}),client.on(e.getSessions,e=>genSessMenu(e,!1)),client.on(e.getSpecSessions,e=>genSessMenu(e,!0)),client.on(e.findSession,e=>client.cur_gid=e),client.on(e.updateState,client.updateState)}();